!function(){if(BDTJ){var t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?"+BDTJ;var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}}(),$(document).ready(function(){var n;window.mzTpl=(n={},function(t,e){var i=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("\t").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("\t").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):n[t]=n[t]||mzTpl(document.getElementById(t).innerHTML);return e?i(e):i}),window.onerror=function(t,e,i,n,a){},window.imgError=function(t,e){t.onerror=null,e&&(t.src=e)},window.DIRURL=function(){return location.protocol+"//"+location.host+DIR},window.API.setting={url:function(t){var e="api";if(0===t.search(/^(\w+)\/(\w+)/)){var i=t.split(/\//);e=i.shift(),t=i.join("/")}var n=-1<t.indexOf(/\?/)?"&":"?";return DIRURL()+e+"/"+t+n+"ajax=1&frame=1&FORM_HASH="+FORM_HASH},beforeCallback:function(t){void 0!==t.ext&&(t={extend:t.ext,error:t.err,data:t.msg})},callback:function(t){}};var t=$;window.tj=function(t){try{var e=arguments.length;"object"==typeof t&&(e=t.length,arguments=t),_hmt.push(["_trackEvent",t,1<e?arguments[1]:"click",2<e?arguments[2]:"",3<e?arguments[3]:""])}catch(t){}},$(document).on("click","*[data-tj]",function(){var t=$(this).data("tj");tj(t.split(/\|/g))}),window.ajaxDialog=function(t){window.API.post("subpage",$.extend({},t,{from:document.location.href}),function(t){if(0==t.error){var e=$(t.data);$(document.body).append(e),e.remove(),window._dialogInit(t)}})},t(document).on("click",".ajax-dialog",function(t){var e=$(this).data();ajaxDialog(e),t.preventDefault(),t.stopPropagation();var i=$(this).data("label")?$(this).data("label"):$(this).text();return tj("dialog",e.click||"click",e.name,i.replace(/\s*/gi,"")),!1}),$("*[data-tab]").each(function(){var t=$(this),n=t.data("tab"),a=t.children();function e(t){t=-1<t?t:0;var e=a.eq(t),i=$(n).eq(t);e.addClass("active").siblings().removeClass("active"),i.show().siblings().hide(),i.find("img[data-src]").each(function(){$(this).attr("data-lazy",$(this).data("src"))}),console.log(i.find("img[data-lazy]")),i.find("img[data-lazy]").lazyload()}a.click(function(){e($(this).index())}),e(a.find(".active").index()||0)});var e,a={};if(window.loadSubPage=function(i,n){1!=a[i]?0<$("#"+i).length||a[i]?n&&n($("#"+i)):(a[i]=1,window.API.post("subpage",{name:i},function(t){if(!t||0!=t.error)return a[i]=!1,void toast(t.data||"取得页面失败","fail");a[i]=2;var e=$(t.data);$(document.body).append(e),n&&n(e)})):toast("loading","loading")},$(".load-more").loadmore(),$("*[data-lazy]").lazyload({onError:function(t){xCover(t)}}),window.xCover=function(t){(t=t||window.event.srcElement||window.event.target).onerror=null;var e=document.createElement("canvas"),i=e.getContext("2d"),n=t.getAttribute("data-title")||t.getAttribute("title")||t.getAttribute("alt")||"封面暂无",a=t.getAttribute("data-time")||"";e.width=1*t.clientWidth,e.height=1*t.clientHeight;var o=1*e.height/7;i.fillStyle="#D8DFE1",i.fillRect(0,0,e.width,e.height),i.strokeStyle="#92A09B",i.moveTo(0,0),i.lineTo(0,e.height),i.lineWidth=5,i.stroke(),i.strokeStyle="#8E9DA0",i.moveTo(4,0),i.lineTo(4,e.height),i.lineWidth=3,i.stroke();var r=o/2;function l(t,e,i,n,a){var o=e.getContext("2d"),r=0;n=Math.max(n,0),i=Math.max(i,8);for(var l=e.width-i,c=0,s=0;s<t.length;s++)l-i<(r+=o.measureText(t[s]).width)&&(o.fillText(t.substring(c,s),i,n),n+=a,r=i,c=s),s==t.length-1&&o.fillText(t.substring(c,s+1),i,n)}i.fillStyle="#000",i.font=o+"px Arial",i.textAlign="start",i.lineWidth=1,l(n,e,r,o,o+r),a&&(i.font="80% Arial",i.fillStyle="#555",l(a,e,r,e.height-o,o+r)),i.fill(),t.src=e.toDataURL("image/jpeg")},void 0!==window.xCoverList)for(var i in xCoverList)xCover(xCoverList[i]);$(".swiper-container").each(function(){if(!$(this).data("autoinit"))new Swiper($(this)[0],{autoplay:!0,speed:500,paginationClickable:!0,pagination:{clickable:!0,el:$(this).find(".swiper-pagination")[0]},on:{init:function(t){},slideChange:function(t){}}})}),0<(e=$(".top-progress .page-loading")).length&&(e.removeClass().css({width:"100%"}),setTimeout(function(){e.parent().remove()},1e3)),$(document).on("click",".pass-toggle",function(){var t=$(this);t.toggleClass("active").prev("input").attr("type",t.hasClass("active")?"text":"password")}),$(document).on("click",".share-btn",function(){window.API.post("api/v1/user/share",{},function(t){return 0==t.error?alert('<textarea style="border:0;min-height:65px;color:#999;">'+t.extend.text+"</textarea><b>请长按复制以上信息给好友</b>",{title:"分享赚积分"}):toast(t.data||"获得分享接口失败"),!0})}),$(document).on("click",".toggle-menu-btn,.fullmenu-bg",function(){$(".fullmenu-bg").toggle(),$(".fullmenu-bg").is(":visible")?$(".toggle-menu-btn").removeClass("icon-category").addClass("icon-subtract"):$(".toggle-menu-btn").addClass("icon-category").removeClass("icon-subtract")})});