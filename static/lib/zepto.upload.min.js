!function($){function createUploadIframe(e,t){return e=e||+new Date,e="jUploadFrame-"+e,$("<iframe>",{id:e,name:e,style:"position: absolute; top: -9999px; left: -9999px",src:window.ActiveXObject?"boolean"==typeof t?"javascript:false":"string"==typeof t?t:"":""}).appendTo(document.body)}function createUploadForm(e,t,n){var o="jUploadFormId-"+e,r="jUploadFrame-"+e,a=$(t),c=a.length>0?"multipart/form-data":"application/x-www-form-urlencoded",i=$("<form>",{action:"",method:"post",name:o,id:o,target:r,enctype:c,style:"position: absolute; top: -9999px; left: -9999px"});return $.isArray(n)&&n.forEach(function(e){i.append($("<textarea>",{name:e.name}).val(e.value).hide())}),a.length>0&&i.append(a.before(a.clone())),i.appendTo(document.body)}function uploadData(r,type){try{var resp="xml"!==type&&type?r.responseText:r.responseXML,data=resp;if("json"==type)try{data=eval("("+$.trim(resp)+")")}catch(e){try{data=JSON.parse(resp)}catch(e){return window.onerror(e.description,resp,-99),resp}window.onerror(e.description,resp,-98)}return data}catch(e){return window.onerror(e.description,r.responseText,-97),r.responseText}}$.ajaxFileUpload=function(e){e=$.extend({type:"POST"},$.ajaxSettings,e);var t,n=+new Date,o=createUploadIframe(n,e.secureuri),r=createUploadForm(n,e.fileElement||"#"+e.fileElementId,e.data),a=o.get(0),c={},i=!1,d=!1,p=function(n){d||(d=!0,a.contentWindow?(c.responseText=a.contentWindow.document.body?a.contentWindow.document.body.innerHTML:null,c.responseXML=a.contentWindow.document.XMLDocument?a.contentWindow.document.XMLDocument:a.contentWindow.document):a.contentDocument&&(c.responseText=a.contentDocument.document.body?a.contentDocument.document.body.innerHTML:null,c.responseXML=a.contentDocument.document.XMLDocument?a.contentDocument.document.XMLDocument:a.contentDocument.document),t=n===!0?"error":"success","success"===t?e.success&&e.success(uploadData(c,e.dataType)):e.error&&e.error(),e.complete&&e.complete(uploadData(c,e.dataType)),setTimeout(function(){o.remove(),r.remove(),clearTimeout(i)},1))};return e.timeout>0&&(i=setTimeout(function(){p(!0)},e.timeout)),o.on("load",function(){p()}),r.attr({action:e.url,method:e.type}).submit()},$.fn.ajaxSubmit=function(e){return $.ajaxFileUpload($.extend({fileElement:this.find("input[type=file]"),data:e.data||this.serializeArray(),type:"POST",url:this.attr("action")},e))}}($);